{{ define "main" }}
  {{ partial "components/page-header.html" . }}

  {{ with .Params.who_we_are }}
    {{ if .enable }}
      <section class="section-sm">
        <div class="container position-relative">
          <div class="row justify-content-center align-items-center">
            <div class="col-lg-4 col-md-6" data-aos="fade-up">
              <div class="section-title">
                <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
                <h1 class="h2 title">{{ .title | markdownify }}</h1>
                <p>{{ .description | markdownify }}</p>
              </div>
            </div>
            <div
              class="col-lg-5 col-md-6"
              data-aos="fade-up"
              data-aos-delay="150">
              <div class="about-image">
                <div class="block">
                  {{ partial "image.html" (dict "Src" .image "Alt" "Play basketball team image - IB Sports Academy" "Size" "464x") }}

                  <div class="has-circle">
                    <span class="ball circle-4 ratio-20 fill"><div class="lines"></div></span>
                    <span class="ball circle-5 ratio-47"><div class="lines"></div></span>
                    <span class="ball circle-6 ratio-85 fill"><div class="lines"></div></span>
                  </div>
                </div>

                <div class="has-circle">
                  <span class="ball circle-1 ratio-85 fill"><div class="lines"></div></span>
                  <span class="ball circle-2 ratio-37"><div class="lines"></div></span>
                  <span class="ball circle-3 ratio-20 fill"><div class="lines"></div></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    {{ end }}
  {{ end }}

  {{ with .Params.dream_team }}
    {{ if .enable }}
      <section class="section-sm dream-team overflow-hidden">
        <div class="container">
          <div class="row">
            <div class="col-lg-12" data-aos="fade-up">
              <div class="section-title text-center">
                <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
                <h2 class="title">{{ .title | markdownify }}</h2>
                <p>{{ .description | markdownify }}</p>
                {{ with .image }}
                {{ $filename := . | replaceRE ".*/" "" | replaceRE "\\.[^.]+$" "" | replaceRE "-" " " | title }}
                <div class="banner-image" data-aos="fade-up" data-aos-delay="300">
                  <div class="row justify-content-center">
                    <div class="col-lg-10">
                      <div class="about-image">
                        <div class="block">
                          {{ partial "image.html" (dict "Src" . "Alt" (printf "Group Photo Coach %s" $filename)  "Size" "1200x") }}

                          <div class="has-circle">
                            <span class="ball circle-5 ratio-47"><div class="lines"></div></span>
                            <span class="ball circle-6 ratio-85 fill"><div class="lines"></div></span>
                          </div>
                        </div>
                        <div class="has-circle">
                          <span class="ball circle-2 ratio-37"><div class="lines"></div></span>
                          <span class="ball circle-4 ratio-20 fill"><div class="lines"></div></span>
                          <span class="ball circle-1 ratio-85 fill"><div class="lines"></div></span>
                          <span class="ball circle-3 ratio-20 fill"><div class="lines"></div></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                {{ end }}
              </div>
            </div>
          </div>
        </div>
      </section>
    {{ end }}
  {{ end }}

  {{ with .Params.hub_and_spoke }}
  {{ if .enable }}
  <section class="section-sm hub-spoke-model overflow-hidden">
    <div class="container">
      <div class="row justify-content-center mb-4">
        <div class="col-lg-11" data-aos="fade-up">
          <div class="section-title text-center">
            <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
            <h2 class="title">{{ .title | markdownify }}</h2>
            <p>{{ .description | markdownify }}</p>
          </div>
        </div>

        <div class="row justify-content-center my-3">
          <div class="impact-diagram-wrapper text-center col-lg-10" data-aos="fade-up" data-aos-delay="300">
            <div class="d-none d-md-block">
              {{ partial "image.html" (dict "Src" .image_desktop "Alt" .image_alt "Size" "3600x" "Class" "img-fluid") }}
            </div>

            <div class="d-block d-md-none">
              {{ partial "image.html" (dict "Src" .image_mobile "Alt" .image_alt "Size" "2400x" "Class" "img-fluid") }}
            </div>
          </div>
        </div>
      </div>

      <div class="row g-4 align-items-stretch">
        {{ range $index, $element := .blocks }}
        <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="{{ mul $index 100 }}">
          <div class="card h-100 p-4 shadow-sm impact-engine-card">
            <div class="icon-wrap mb-4 d-inline-flex align-items-center justify-content-center">
              <i class="{{ .icon }} la-2x"></i>
            </div>

            <h5 class="fw-bold mb-1">{{ .title }}</h5>
            <p class="small text-primary fw-semibold mb-3 text-uppercase">{{ .subtitle }}</p>
            <div class="text-muted small">
              {{ .description | markdownify }}
            </div>
          </div>
        </div>
        {{ end }}
      </div>

    </div>
  </section>
  {{ end }}
  {{ end }}

  {{ with .Params.partnerships }}
    {{ if .enable }}
      <section class="collaborate section-sm">
        <div class="container">
          {{ $.Scratch.Set "counter" 0 }}
          {{ range .block }}

            {{ $.Scratch.Set "counter" (add ($.Scratch.Get "counter") 1) }}
            {{ $n := $.Scratch.Get "counter" }}
            <div class="row justify-content-center align-items-center mb-4">
              <div
                class="col-lg-5 {{ if (modBool $n 2) }}order-md-1{{ end }}"
                data-aos="fade-up">
                <div class="section-title mb-0">
                  <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
                  <h2 class="title text-break">{{ .title | markdownify }}</h2>
                  <p>{{ .description | markdownify }}</p>
                </div>
              </div>
              <div
                class="col-lg-6 mt-3 mt-lg-0"
                data-aos="fade-up"
                data-aos-delay="100">
                <div class="ps-0 ps-lg-3">
                  {{ if fileExists (add `assets/` .image) }}
                    {{ $img:= resources.Get .image }}
                    {{ $filename := $img | replaceRE ".*/" "" | replaceRE "\\.[^.]+$" "" | replaceRE "-" " " | title }}
                    <img
                      loading="lazy"
                      decoding="async"
                      class="img-fluid"
                      src="{{ $img.RelPermalink }}"
                      alt="{{ $filename }}"
                      onerror="this.onerror=null;this.src='{{ $img.RelPermalink }}'" />
                  {{ end }}
                </div>
              </div>
            </div>
          {{ end }}
        </div>
      </section>
    {{ end }}
  {{ end }}

  {{ with .Params.what_we_do }}
    {{ if .enable }}
      <section data-aos="fade-in">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12">
              <div class="section-title text-center">
                <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
                <h2 class="title">{{ .title | markdownify }}</h2>
              </div>
            </div>

            {{ range .block }}
              <div class="col-xl-5 col-lg-6">
                <div class="text-center px-0 px-md-5 mt-4">
                  <h3 class="text-capitalize">{{ .title | markdownify }}</h3>
                  <p>{{ .content | markdownify }}</p>
                </div>
              </div>
            {{ end }}
          </div>
        </div>
      </section>
    {{ end }}
  {{ end }}

  {{ with .Params.our_office }}
  {{ if .enable }}
    <section class="section-sm features">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-xl-6 col-lg-8 col-md-10">
            <div class="section-title text-center mb-0" data-aos="fade-in">
              <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
              <h2 class="title">{{ .title | markdownify }}</h2>
              <p>{{ .description | markdownify }}</p>
            </div>
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-xl-12">
            <div class="row">
              {{ range .office_locations }}
                <div class="col-lg-3 col-md-6 col-sm-6">
                  <div class="office-loc-item features-card foundation-stats">
                    <div class="icon text-primary mb-1">
                      {{ .country_flag | markdownify }}
                    </div>
                    <h3>{{ .city | markdownify }}</h3>
                    <h5>{{ .address_line_one | markdownify }}</h5>
                    <p>{{ .address_line_two | markdownify }}</p>
                  </div>
                </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </section>
  {{ end }}
  {{ end }}

  {{ with .Params.impact_stories }}
  {{ if .enable }}
  <section class="section-sm mb-2 foundation-impact-stories">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-xl-8 col-lg-8 col-md-10 mb-4">
          <div class="section-title text-center mb-0" data-aos="fade-up">
            <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
            <h2 class="title">{{ .title | markdownify }}</h2>
            <p>{{ .description | markdownify }}</p>
          </div>
        </div>
      </div>

      {{ range .stories }}
      <div class="row align-items-center mb-5 pb-lg-4 {{ if .reverse }}flex-row-reverse{{ end }}">

        <div class="col-lg-5 mb-4 mb-lg-0" data-aos="{{ if .reverse }}fade-left{{ else }}fade-right{{ end }}">
          <div class="block" style="transition: transform .5s ease;">
            {{ partial "image.html" (dict "Src" .image "Alt" .image_alt  "Size" "1200x") }}
          </div>
        </div>

        <div class="col-lg-6 {{ if .reverse }}me-auto{{ else }}ms-auto{{ end }}" data-aos="fade-up" data-aos-delay="100">
          <div class="ps-lg-3 pe-lg-3">
            <span class="icon badge impact-badge bg-soft-primary text-primary fw-semibold px-3 py-2 mb-4 d-inline-block rounded-pill">
              <!-- <span class="badge d-inline-flex align-items-center gap-2 px-4 py-2 mb-4 rounded-pill fw-semibold "> -->

              <i class="las la-lg la-graduation-cap"></i> {{ .subtitle | markdownify }}
            </span>
            <h2>{{ .name | markdownify }}</h2>
            <div>
              {{ .description | markdownify }}
            </div>

            <div class="d-flex flex-wrap gap-2 mt-3 mb-3">
              {{ range .stats }}
              <span class="icon badge border border-primary text-primary py-2 px-3 rounded-pill fw-normal shadow-sm">
                <i class="las la-lg {{ .icon }} me-1"></i> {{ .text | markdownify }}
              </span>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
      {{ end }}

      {{ with .support_a_child_cta }}
      <div class="row justify-content-center mt-5">
        <div class="col-xl-10 col-lg-10 col-md-10 mb-4">
          <div class="section-title text-center mb-0" data-aos="fade-up">
            <p class="text-uppercase">{{ .subtitle | markdownify }}</p>
            <h2 class="title">{{ .title | markdownify }}</h2>
            <div class="support-a-child">
              <div class="icon text-primary mb-1">
                {{ .icon | markdownify }}
              </div>
            </div>
            <p>{{ .description | markdownify }}</p>
            <div class="mt-4">
              <a href="{{ .btn_link | safeURL}}" class="btn btn-primary">
                {{ .btn_text | markdownify }}
              </a>
            </div>
          </div>
        </div>
      </div>
      {{ end }}

    </div>
  </section>
  {{ end }}
  {{ end }}

{{ end }}
